{% extends "mychat/app/base.html" %}

{% block app_title %} 消息({{ total_unread }}) {% endblock %}

{% block app_content %}
   <ul class="divide-y divide-gray-200">
      {% for state in states %}
         <li class="py-2 hover:bg-gray-200">
            <a href="/conversations/{{ state.conv.id }}" class="flex">
               <div class="indicator">
                  <span class="indicator-item badge badge-secondary badge-xs">{{ state.unread }}</span>
                  {% include "mychat/partials/avatar.html" with avatar_url=state.peer.avatar.url %}
               </div>
               <div class="flex flex-col ml-3">
                  <span>{{ state.peer.display_name }}</span>
                  <span>{{ state.conv.last_msg.payload }}</span>
               </div>
               <div class="ml-auto">
                  <span>{{ state.conv.last_msg.created_at|date:"H:i" }}</span>
               </div>
            </a>
         </li>
      {% endfor %}
   </ul>
{% endblock %}
