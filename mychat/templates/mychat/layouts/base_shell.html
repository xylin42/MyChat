{% extends base_layout %}

{% block body_content %}

   <div id="shell" class="h-full pb-16 pt-4 flex flex-col w-70 mx-auto">
      <div id="shell-content" class="mt-3 flex-1"
           hx-on::after-swap="console.log('body-content swap-in')"
      >
         {% block shell_content %}
         {% endblock %}
      </div>

      <div id="shell-dock" class="dock" x-data="{ current: window.location.pathname }"
      x-on:htmx:pushed-into-history.camel.window="current=window.location.pathname"
      >
         {% with htmx_attrs='hx-target="#shell-content" hx-swap="innerHTML" hx-push-url="true"' %}
            <a hx-get="/conversations" {{ htmx_attrs }} :class="{'dock-active': current.startsWith('/conversations')}">
               {% include "mychat/partials/icon_with_indicator.html" with icon="mdi:message"  %}
               <span class="dock-label">消息</span>
            </a>
            <a hx-get="/friends" {{ htmx_attrs }} :class="{'dock-active': current.startsWith('/friends')}">
               {% include "mychat/partials/icon_with_indicator.html" with icon="mdi:account-details"  %}
               <span class="dock-label">好友</span>
            </a>
            <a href="/profile" {{ htmx_attrs }}>
               <div class="icon-[mdi--account]"></div>
               <span class="dock-label">我的</span>
            </a>
         {% endwith %}
      </div>
   </div>
{% endblock %}